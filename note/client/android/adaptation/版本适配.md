### 5.0
#### metral design


### 6.0 api 23.0
#### 动态权限
> Dangerous Permissions
> 日历	READ_CALENDAR
  日历	WRITE_CALENDAR
  相机	CAMERA
  联系人	READ_CONTACTS
  联系人	WRITE_CONTACTS
  联系人	GET_ACCOUNTS
  位置	ACCESS_FINE_LOCATION
  位置	ACCESS_COARSE_LOCATION
  麦克风	RECORD_AUDIO
  电话	READ_PHONE_STATE
  电话	CALL_PHONE
  电话	READ_CALL_LOG
  电话	WRITE_CALL_LOG
  电话	ADD_VOICEMAIL
  电话	USE_SIP
  电话	PROCESS_OUTGOING_CALLS
  传感器	BODY_SENSORS
  短信	SEND_SMS
  短信	RECEIVE_SMS
  短信	READ_SMS
  短信	RECEIVE_WAP_PUSH
  短信	RECEIVE_MMS
  存储	READ_EXTERNAL_STORAGE
  存储	WRITE_EXTERNAL_STORAGE
  
 * <uses-permission android:name="android.permission.上表的权限字符" />//静态申请
 * 动态申请单个
 > public void requestPower() {
       //判断是否已经赋予权限
           if (ContextCompat.checkSelfPermission(this,
                   Manifest.permission.上表权限字符)
                   != PackageManager.PERMISSION_GRANTED) {
              //如果应用之前请求过此权限但用户拒绝了请求，此方法将返回 true。
               if (ActivityCompat.shouldShowRequestPermissionRationale(this,
                       Manifest.permission.上表权限字符)) {//这里可以写个对话框之类的项向用户解释为什么要申请权限，并在对话框的确认键后续再次申请权限
               } else {
               //申请权限，字符串数组内是一个或多个要申请的权限，1是申请权限结果的返回参数，在onRequestPermissionsResult可以得知申请结果
                   ActivityCompat.requestPermissions(this,
                           new String[]{Manifest.permission.上表权限字符,}, 1);
               }
           }
       }

### 7.0 api 24.0
#### fileprovider
> <provider
  android:name="android.support.v4.content.FileProvider"
  android:authorities="${applicationId}.provider"
  android:exported="false"
  android:grantUriPermissions="true">
  <meta-data
     android:name="android.support.FILE_PROVIDER_PATHS"
     android:resource="@xml/file_paths"/>
  </provider>
  
> <files-path/>代表的根目录： Context.getFilesDir()
    <external-path/>代表的根目录:Environment.getExternalStorageDirectory()
    <cache-path/>代表的根目录: getCacheDir()
    
> FileProvider.getUriForFile(context, context.getPackageName() + ".fileProvider",new File(filePath))

### 8.0

#### 安全安装
 * 添加权限
  > <uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES" />
#### notification

> if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
              NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
              NotificationChannel mChannel = new NotificationChannel("channel_01",
                      "消息推送", NotificationManager.IMPORTANCE_DEFAULT);
              manager.createNotificationChannel(mChannel);
                 Notification.Builder builder = new Notification.Builder(context);
                      builder.setTicker("开始下载");
                      builder.setSmallIcon(R.mipmap.ic_launcher);
                      builder.setLargeIcon(BitmapFactory.decodeResource(DJApplication.getInstance().getResources(), 
                          R.mipmap.ic_launcher));
                      builder.setAutoCancel(true);
                      PendingIntent pIntent = PendingIntent.getActivity(context, 0, new Intent(), PendingIntent.FLAG_UPDATE_CURRENT);
                      builder.setContentTitle("下载中");
                      builder.setContentIntent(pIntent);
                      builder.setContentText(text);
                      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                          builder.setChannelId("channel_01");//设置有效的通知渠道 ID，这个ID要和之前创建时候的Channel_ID相同
                      }
                      manager.notify(1,  builder.build());
              }
              
#### 通知渠道

~~~
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            NotificationManager notificationManager = (NotificationManager)
                    getSystemService(Context.NOTIFICATION_SERVICE);
            //分组（可选）
            //groupId要唯一
            String groupId = "group_001";
            NotificationChannelGroup group = new NotificationChannelGroup(groupId, "广告");
            //创建group
            notificationManager.createNotificationChannelGroup(group);
            //channelId要唯一
            String channelId = "channel_001";
            NotificationChannel adChannel = new NotificationChannel(channelId,
                    "推广信息", NotificationManager.IMPORTANCE_DEFAULT);
            //补充channel的含义（可选）
            adChannel.setDescription("推广信息");
            //将渠道添加进组（先创建组才能添加）
            adChannel.setGroup(groupId);
            //创建channel
            notificationManager.createNotificationChannel(adChannel);
            //创建通知时，标记你的渠道id
            Notification notification = new Notification.Builder(MainActivity.this, channelId)
                    .setSmallIcon(R.mipmap.ic_launcher)
                    .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher))
                    .setContentTitle("一条新通知")
                    .setContentText("这是一条测试消息")
                    .setAutoCancel(true)
                    .build();
            notificationManager.notify(1, notification);
        }
~~~

  > 
        
 
